<h1>Editing Gym</h1>

<!-- <div class="container">
  <%= form_for([@user, @gym]) do |f| %>
    <% if @gym.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(@gym.errors.count, "error") %> prohibited this gym from being saved:</h2>

        <ul>
        <% @gym.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
        </ul>
      </div>
    <% end %>
    <div class="form-group row">
      <label for="inputEmail3" class="col-sm-2 col-form-label">Email</label>
      <div class="col-sm-10">
        <input type="email" class="form-control" id="inputEmail3" placeholder="Email">
      </div>
    </div>
    <div class="form-group row">
      <label for="inputPassword3" class="col-sm-2 col-form-label">Password</label>
      <div class="col-sm-10">
        <input type="password" class="form-control" id="inputPassword3" placeholder="Password">
      </div>
    </div>
    <fieldset class="form-group row">
      <legend class="col-form-legend col-sm-2">Radios</legend>
      <div class="col-sm-10">
        <div class="form-check">
          <label class="form-check-label">
            <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios1" value="option1" checked>
            Option one is this and that&mdash;be sure to include why it's great
          </label>
        </div>
        <div class="form-check">
          <label class="form-check-label">
            <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios2" value="option2">
            Option two can be something else and selecting it will deselect option one
          </label>
        </div>
        <div class="form-check disabled">
          <label class="form-check-label">
            <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios3" value="option3" disabled>
            Option three is disabled
          </label>
        </div>
      </div>
    </fieldset>
    <div class="form-group row">
      <label class="col-sm-2">Checkbox</label>
      <div class="col-sm-10">
        <div class="form-check">
          <label class="form-check-label">
            <input class="form-check-input" type="checkbox"> Check me out
          </label>
        </div>
      </div>
    </div>
    <div class="form-group row">
      <div class="offset-sm-2 col-sm-10">
        <button type="submit" class="btn btn-primary">Sign in</button>
      </div>
    </div>
  <% end %>
</div> -->







<%= form_for([@user, @gym]) do |f| %>
  <% if @gym.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@gym.errors.count, "error") %> prohibited this gym from being saved:</h2>

      <ul>
      <% @gym.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br>
    <%= f.text_field :name %>
  </div>

  <div class="field">
    <%= f.label :contact_email %><br />
    <%= f.text_field :contact_email, :value => current_user.email %>
  </div>

  <div class="field">
    <%= f.label :phone %><br />
    <%= f.phone_field :phone %>
  </div>

  <div class="field">
    <%= f.label :location %><br />
    <%= f.text_field :location %>
  </div>

  <div class="field">
    <%= f.label :hours_of_operation %><br />
    <%= f.text_field :hours_of_operation %>
  </div>

  <div class="field">
    <%= f.label :image, "Logo" %>
    <%= f.file_field :image, id: "gym_image" %>
    <div style="border:1px solid black; border-radius: 5px; padding:10px;">
      <div id="gym_image_preview"></div>
      <% if f.object.image_file_name != nil %>
        <br />
          <div id="gym_image_current">
            <%=f.check_box(:remove_image) %>
            <%= label :remove_image, "Remove Image" %>
            <br />
            <%= image_tag f.object.image.url(:medium)%>
          </div>
      <% end %>
    </div>
  </div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>


<%= link_to 'Show', gym_path(@gym) %> |
<%= link_to 'Back', user_gyms_path %>

<script>
$(function() {
  $('#gym_image').on('change', function(event) {
    var files = event.target.files;
    var image = files[0]
    var reader = new FileReader();
    reader.onload = function(file) {
      var img = new Image();
      console.log(file);
      img.src = file.target.result;
      img.width = 400;
      $('#gym_image_preview').html(img)
      $('div.gym_image_preview > img').attr('width', '440');

      $('#gym_image_current').hide();
    }
    reader.readAsDataURL(image);
    console.log(files);
  });
});
</script>
